<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<style type="text/css">
			canvas{
				background-color: rgba(255,0,0,.5);
			}
		</style>
		
	</head>
	<body>
		<canvas id="test" width="500" height="500"></canvas>
	</body>
	<script type="text/javascript">
		window.onload=function(){
			var canvas=document.querySelector("#test")
			//console.dir(canvas)
			if(canvas.getContext){
				var ctx=canvas.getContext("2d")
				//console.dir(ctx)
				
			}
			
			canvas.onmousedown=function(e){
				e=e||event
				if(canvas.setCapture){
					canvas.setCapture()
				}
				ctx.beginPath()
				ctx.moveTo(e.clientX-canvas.offsetLeft,e.clientY-canvas.offsetTop)
				document.onmousemove=function(e){
					ctx.save()
					ctx.strokeStyle="pink"
					e=e||event
					ctx.lineTo(e.clientX-canvas.offsetLeft,e.clientY-canvas.offsetTop)
					ctx.stroke()
					ctx.restore()
				}
				
				document.onmouseup=function(){
					document.onmousemove=document.onmouseup=null;
					if(document.releaseCapture){
						document.releaseCapture()
					}
				}
				
				return false
			}
			
		}
	</script>
</html>
