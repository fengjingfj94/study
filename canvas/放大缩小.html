<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			canvas{
				
				background: rgba(255,0,0,0.1);
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translate(-50%,-50%);
			}
		</style>
	</head>
	
	<body>
		<canvas id="test" width="500" height="500"></canvas>
	</body>
	<script type="text/javascript">
		window.onload=function(){
			var canvas=document.querySelector("#test")
			if(canvas.getContext){
				var ctx=canvas.getContext("2d")
 				var flag=0
 				var flagScale=0
 				var scale=0
				
				ctx.save()
				ctx.translate(150,150)
				
				ctx.beginPath()
				ctx.fillRect(-50,-50,100,100)
				ctx.restore()
				
				setInterval(function(){
					flag++;
					ctx.clearRect(0,0,canvas.width,canvas.height)
					ctx.save()
					ctx.translate(150,150)
					ctx.rotate(flag*Math.PI/180)
					
					if(scale==100){
						flagScale=-1
					}else if(scale==0){
						flagScale=1
					}
					scale+=flagScale
					ctx.scale(scale/50,scale/50)
					
					ctx.beginPath()
					ctx.fillRect(-50,-50,100,100)
					console.log("画了一次")
					ctx.restore()
				},50)
			}
		}
	</script>
</html>